import{Q as f,v as u,B as S,s as y,P as p}from"./index-LcRImv3x.js";import{d as g,M as i,L as B,a as T,b as d,A}from"./feedback-4hVRiAoC.js";function C(t){return(e,s)=>{const o=e.comments?g(e.comments):0,n=s.comments?g(s.comments):0;return t===i?s.upvotes-e.upvotes:t===B?e.upvotes-s.upvotes:t===T?n-o:t===d?o-n:0}}function E(t){return e=>t==="all"||t===e.category}const h=f("suggestions",()=>{const t=u(!0),e=u(null),s=u([]),o=u(i),n=u("all"),l=S(()=>s.value.length);async function c(a={filterBy:"all",sortBy:i}){t.value=!0;try{const v=await(await fetch(A)).json();return o.value=a.sortBy,n.value=a.filterBy,v.filter(E(a.filterBy)).sort(C(a.sortBy))}catch(r){e.value="Failed to fetch any suggestions",console.log(r)}finally{t.value=!1}}async function m(a={}){const r=await c({sortBy:a.sortBy??o.value,filterBy:a.filterBy??n.value});r&&(s.value=r)}return{suggestions:s,suggestionsAmount:l,loader:t,error:e,filterBy:n,sortBy:o,fetchSuggestions:c,loadSuggestionsPageDataToStore:m}}),P=f("statuses",()=>{const{suggestions:t}=y(h()),e=u([{status:"planned",amount:0,name:"planned",label:"Planned",color:"#F49F85"},{status:"in-progress",amount:0,name:"in-progress",label:"In-progress",color:"#AD1FEA"},{status:"live",amount:0,name:"live",label:"Live",color:"#62BCFA"},{status:"suggestion",amount:0,name:"suggestion",label:"Suggestion",color:""}]);p(s);function s(){e.value=e.value.map(o=>{const n=t.value.filter(l=>l.status===o.status).length;return{...o,amount:n}})}return{statuses:e,calculateStatusesAmount:s}});export{h as a,P as u};
