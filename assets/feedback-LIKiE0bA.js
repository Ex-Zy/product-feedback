import{d as U,m,o as g,c as h,a as u,A as f,n as V,_ as y,P as A,h as F,r as M,i as N,Q as z,G as P,v as w,u as T,t as E,x as j,y as S,p as q,j as L,k as Q,l as b,q as G,R as H,S as Y,M as B,U as J}from"./index-Ihm1KczI.js";const K={class:"ui-category__text"},O=U({__name:"UiCategory",props:{name:{default:"default"},isActive:{type:Boolean,default:!1},isClickable:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:n}){const e=t,o=n,a=()=>{o("click")},d=m(()=>({"is-active":e.isActive,"is-clicable":e.isClickable}));return(r,p)=>(g(),h("div",{class:V(["ui-category",d.value]),onClick:a},[u("div",K,f(r.name),1)],2))}}),W=y(O,[["__scopeId","data-v-f9946171"]]);function D(t){return t.reduce((n,e)=>{var a;const o=(((a=e.replies)==null?void 0:a.length)??0)+1;return n+o},0)}const X={key:0,class:"ui-button__icon"},Z={class:"ui-button__txt"},ee=U({__name:"UIButton",props:{type:{default:"primary"},text:{default:"Default"}},emits:["click"],setup(t,{emit:n}){const e=t,o=n,a=A(),d=()=>o("click"),r=m(()=>({[`is-${e.type}`]:!0}));return(p,_)=>(g(),h("button",{type:"button",class:V(["ui-button",r.value]),onClick:d},[F(a).default?(g(),h("span",X,[M(p.$slots,"default",{},void 0,!0)])):N("",!0),u("span",Z,f(e.text),1)],2))}}),be=y(ee,[["__scopeId","data-v-7cdf8b7a"]]),te={},se={width:"10",height:"7",xmlns:"http://www.w3.org/2000/svg"},oe=u("path",{d:"M1 6l4-4 4 4","stroke-width":"2",fill:"none","fill-rule":"evenodd"},null,-1),ne=[oe];function ae(t,n){return g(),h("svg",se,ne)}const ie=y(te,[["render",ae]]),ce="data:image/svg+xml,%3csvg%20width='18'%20height='16'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.62%2016H1.346l.902-.91c.486-.491.79-1.13.872-1.823C1.036%2011.887%200%209.89%200%207.794%200%203.928%203.52%200%209.03%200%2014.87%200%2018%203.615%2018%207.455c0%203.866-3.164%207.478-8.97%207.478-1.017%200-2.078-.137-3.025-.388A4.705%204.705%200%20012.62%2016z'%20fill='%23CDD2EE'%20fill-rule='nonzero'/%3e%3c/svg%3e",le={class:"ui-upvote__content"},ue={class:"ui-upvote__arrow"},re={class:"ui-upvote__amount"},de=U({__name:"UIUpVote",props:{align:{default:"vertical"},modelValue:{},isUpvoted:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:n}){const e=t,o=n,a=m(()=>e.isUpvoted?"You upvoted for this suggestion":""),d=m(()=>({[`is-${e.align}`]:!0,"is-upvoted":e.isUpvoted}));function r(p){o("update:modelValue",p)}return(p,_)=>{const k=z("tooltip");return P((g(),h("div",{class:V(["ui-upvote",d.value]),onClick:_[0]||(_[0]=$=>r(e.modelValue+1))},[u("div",le,[u("div",ue,[w(ie)]),u("div",re,f(e.modelValue),1)])],2)),[[k,a.value]])}}}),pe=y(de,[["__scopeId","data-v-fe7ad347"]]),me=t=>(q("data-v-451ed0f4"),t=t(),L(),t),_e=["data-id"],ve={class:"suggestions-item__vote"},fe={class:"suggestions-item__content"},ge={"data-test":"description",class:"suggestions-item__description b1"},he={"data-test":"amount",class:"suggestions-item__comment-amount"},ye=me(()=>u("img",{src:ce,alt:"Comment icon"},null,-1)),ke=U({__name:"SuggestionsListItem",props:{id:{},upvotes:{},title:{},description:{},category:{},comments:{},isUpVoted:{type:Boolean}},emits:["upvote"],setup(t,{emit:n}){const e=t,o=n,a=T("(max-width: 767px)"),d=m(()=>a.value?"horizontal":"vertical"),r=m(()=>e.comments?D(e.comments):0);function p(){e.isUpVoted||o("upvote",!0)}const _=m(()=>`/feedback/${e.id}`);return(k,$)=>{const x=E("router-link");return g(),h("li",{class:"suggestions-item","data-id":e.id},[u("div",ve,[w(pe,{align:d.value,"is-upvoted":e.isUpVoted,"model-value":e.upvotes,"onUpdate:modelValue":p},null,8,["align","is-upvoted","model-value"])]),u("div",fe,[w(x,{"data-test":"title",class:"suggestions-item__title h3",to:_.value},{default:j(()=>[S(f(e.title),1)]),_:1},8,["to"]),u("p",ge,f(e.description),1),w(W,{name:e.category},null,8,["name"])]),u("div",he,[ye,S(" "+f(r.value),1)])],8,_e)}}}),we=y(ke,[["__scopeId","data-v-451ed0f4"]]),Ue=Q("feedback",()=>{const t=b(!1),n=b(null),e=b(null),o=b(null),a=m(()=>{var i;return((i=e.value)==null?void 0:i.comments)??null}),d=m(()=>a.value?D(a.value):0);async function r(i,l=300){t.value=!0;try{return await new Promise((s,I)=>{const C=G.find(v=>v.id===i);setTimeout(s,l,C)})}catch(c){n.value="Failed to load feedback",console.log(c)}finally{t.value=!1}}async function p(){const i=Number(H().params.id),l=await r(i);l&&(e.value=l)}async function _(i,l){const c=Y(i);if(!l||!c.value)return;c.value.isUpvoted=l,c.value.upvotes++;const{showConfetti:s}=J();await s()}function k(){t.value=!1,n.value=null,e.value=null,o.value=null}function $(i,l){const c=l??i,s=o.value===c;o.value=s?null:c}function x(i,l){var I,C;const{currentUser:c}=B(),s=(C=(I=e.value)==null?void 0:I.comments)==null?void 0:C.find(v=>v.id===i);if(s){const v={id:Date.now(),content:l,user:{...c},replyingTo:(s==null?void 0:s.user.username)??""};s.replies=s.replies?[...s.replies,v]:[v],o.value=null}}function R(i){if(!e.value)return;const{currentUser:l}=B(),{comments:c}=e.value,s={id:Date.now(),content:i,user:{...l}};e.value.comments=c?[...c,s]:[s]}return{loading:t,error:n,feedback:e,comments:a,commentsAmount:d,openReplyId:o,fetchFeedback:r,loadFeedbackToStore:p,upvoteFeedback:_,$reset:k,toggleReply:$,submitReply:x,submitComment:R}});export{ie as I,we as S,W as U,be as a,D as c,Ue as u};
